# 3.7. Компьютерные сети, лекция 2

### 1. Проверьте список доступных сетевых интерфейсов на вашем компьютере. Какие команды есть для этого в Linux и в Windows?

На MacOS я использую для этого команду ifconfig:

```commandline
➜  .ssh ifconfig -L
lo0: flags=8049<UP,LOOPBACK,RUNNING,MULTICAST> mtu 16384
	options=1203<RXCSUM,TXCSUM,TXSTATUS,SW_TIMESTAMP>
	inet 127.0.0.1 netmask 0xff000000
	inet6 ::1 prefixlen 128
	inet6 fe80::1%lo0 prefixlen 64 scopeid 0x1
	nd6 options=201<PERFORMNUD,DAD>
...
```

### 2. Какой протокол используется для распознавания соседа по сетевому интерфейсу? Какой пакет и команды есть в Linux для этого?

LLDP - протокол для обмена информацией между соседними устройствами.
Позволяет определить к какому порту коммутатора подключен сервер.

```commandline
ubuntu@ip-172-31-12-151:~$ lldpctl
-------------------------------------------------------------------------------
LLDP neighbors:
-------------------------------------------------------------------------------
```

### 3. Какая технология используется для разделения L2 коммутатора на несколько виртуальных сетей? Какой пакет и команды есть в Linux для этого? Приведите пример конфига.

1. VLAN.
2. Пакет называется vlan `sudo apt-get install vlan`
3. Пример конфигурации ниже:

```commandline
ubuntu@ip-172-31-12-151:~$ sudo nano /etc/network/interfaces
auto vlan5
iface vlan5 inet static
address 192.168.5.1
netmask 255.255.255.0
vlan_raw_device eth0
```

### 4. Какие типы агрегации интерфейсов есть в Linux? Какие опции есть для балансировки нагрузки? Приведите пример конфига.

Технология LAG - Link Aggregation Group: 

Бывают: 
1. Статический тип LAG (на Cisco mode on)
2. Динамический тип LAG (на Cisco mode active)


### 4. Сколько IP адресов в сети с маской /29? Сколько /29 подсетей можно получить из сети с маской /24. Приведите несколько примеров /29 подсетей внутри сети 10.10.10.0/24.

#### Сколько IP адресов в сети с маской /29?
Ответ: адресов - 8, хостов - 6

```commandline
ubuntu@ip-172-31-12-151:~$ ipcalc 10.10.0.0/29
Address:   10.10.0.0            00001010.00001010.00000000.00000 000
Netmask:   255.255.255.248 = 29 11111111.11111111.11111111.11111 000
Wildcard:  0.0.0.7              00000000.00000000.00000000.00000 111
=>
Network:   10.10.0.0/29         00001010.00001010.00000000.00000 000
HostMin:   10.10.0.1            00001010.00001010.00000000.00000 001
HostMax:   10.10.0.6            00001010.00001010.00000000.00000 110
Broadcast: 10.10.0.7            00001010.00001010.00000000.00000 111
Hosts/Net: 6                     Class A, Private Internet
```

#### Сколько /29 подсетей можно получить из сети с маской /24.

Ответ: В сети с маской /24 - 254 хоста, /29 сетей влезет - 31 шт.

```commandline
ubuntu@ip-172-31-12-151:~$ ipcalc 10.10.0.0/24
Address:   10.10.0.0            00001010.00001010.00000000. 00000000
Netmask:   255.255.255.0 = 24   11111111.11111111.11111111. 00000000
Wildcard:  0.0.0.255            00000000.00000000.00000000. 11111111
=>
Network:   10.10.0.0/24         00001010.00001010.00000000. 00000000
HostMin:   10.10.0.1            00001010.00001010.00000000. 00000001
HostMax:   10.10.0.254          00001010.00001010.00000000. 11111110
Broadcast: 10.10.0.255          00001010.00001010.00000000. 11111111
Hosts/Net: 254                   Class A, Private Internet
```

#### Приведите несколько примеров /29 подсетей внутри сети 10.10.10.0/24.

Ответ: вот пример расчета ipcalc 

```commandline
ubuntu@ip-172-31-12-151:~$ ipcalc -b --split 8 8  10.10.10.0/24
Address:   10.10.10.0
Netmask:   255.255.255.0 = 24
Wildcard:  0.0.0.255
=>
Network:   10.10.10.0/24
HostMin:   10.10.10.1
HostMax:   10.10.10.254
Broadcast: 10.10.10.255
Hosts/Net: 254                   Class A, Private Internet

1. Requested size: 8 hosts
Netmask:   255.255.255.240 = 28
Network:   10.10.10.0/28
HostMin:   10.10.10.1
HostMax:   10.10.10.14
Broadcast: 10.10.10.15
Hosts/Net: 14                    Class A, Private Internet

2. Requested size: 8 hosts
Netmask:   255.255.255.240 = 28
Network:   10.10.10.16/28
HostMin:   10.10.10.17
HostMax:   10.10.10.30
Broadcast: 10.10.10.31
Hosts/Net: 14                    Class A, Private Internet

Needed size:  32 addresses.
Used network: 10.10.10.0/27
Unused:
10.10.10.32/27
10.10.10.64/26
10.10.10.128/25
```

Вроде подводных камней с приватными или ограниченными сетями в вопросе нет. 

### 5. Задача: вас попросили организовать стык между 2-мя организациями. Диапазоны 10.0.0.0/8, 172.16.0.0/12, 192.168.0.0/16 уже заняты. Из какой подсети допустимо взять частные IP адреса? Маску выберите из расчета максимум 40-50 хостов внутри подсети.

### 6. Как проверить ARP таблицу в Linux, Windows? Как очистить ARP кеш полностью? Как из ARP таблицы удалить только один нужный IP?
